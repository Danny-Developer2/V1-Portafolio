import{a as V,b as m,c as z,d as L,e as A,f as O,g as q,l as B,n as k}from"./chunk-EZXKPUDW.js";import{a as H}from"./chunk-7MDU7DKT.js";import{$ as R,B as P,Ba as y,C as c,F as f,G as w,H as v,Ja as G,K as s,Ma as $,N as b,P as p,S as i,T as o,U as u,V as I,W as N,X as _,_ as n,a as E,ea as M,n as h,qa as T,s as S,t as F,wa as U,ya as D}from"./chunk-QP2BZZD3.js";var Q=t=>[t];function W(t,r){t&1&&(i(0,"span",13),n(1,"El nombre del proyecto es necesario"),o())}function X(t,r){t&1&&(i(0,"span",13),n(1,"La descripcion del proyecto es necesaria"),o())}function Y(t,r){t&1&&(i(0,"span",13),n(1,"La tecnologia del proyecto es necesaria"),o())}function Z(t,r){t&1&&(i(0,"span",13),n(1,"La url del proyecto es necesaria"),o())}function ee(t,r){t&1&&(i(0,"span",13),n(1,"La url de la imagen del proyecto es necesaria"),o())}function te(t,r){if(t&1){let e=I();i(0,"form",9),N("ngSubmit",function(){S(e);let d=_();return F(d.updateProject())}),i(1,"div",10)(2,"label",11),n(3,"Nombre:"),o(),u(4,"input",12),s(5,W,2,0,"span",13),o(),i(6,"div",10)(7,"label",14),n(8,"Descripcion:"),o(),u(9,"input",15),s(10,X,2,0,"span",13),o(),i(11,"div",10)(12,"label",16),n(13,"Tecnologia:"),o(),u(14,"input",17),s(15,Y,2,0,"span",13),o(),i(16,"div",10)(17,"label",18),n(18,"URL:"),o(),u(19,"input",19),s(20,Z,2,0,"span",13),o(),i(21,"div",10)(22,"label",20),n(23,"URL Imagen:"),o(),u(24,"input",21),s(25,ee,2,0,"span",13),o(),i(26,"button",22),n(27,"Guardar Cambios"),o()()}if(t&2){let e,a,d,g,j,l=_();b("formGroup",l.projectForm),c(5),p((e=l.projectForm.get("name"))!=null&&e.invalid&&((e=l.projectForm.get("name"))!=null&&e.touched)?5:-1),c(5),p((a=l.projectForm.get("description"))!=null&&a.invalid&&((a=l.projectForm.get("description"))!=null&&a.touched)?10:-1),c(5),p((d=l.projectForm.get("technology"))!=null&&d.invalid&&((d=l.projectForm.get("technology"))!=null&&d.touched)?15:-1),c(5),p((g=l.projectForm.get("url"))!=null&&g.invalid&&((g=l.projectForm.get("url"))!=null&&g.touched)?20:-1),c(5),p((j=l.projectForm.get("imgUrl"))!=null&&j.invalid&&((j=l.projectForm.get("imgUrl"))!=null&&j.touched)?25:-1),c(),b("disabled",l.projectForm.invalid)}}function oe(t,r){if(t&1&&(i(0,"div",8)(1,"p",23),n(2),o()()),t&2){let e=_();c(2),R(e.errorMessage)}}var C=class t{constructor(r,e,a,d,g){this.fb=r;this.projectService=e;this.route=a;this.router=d;this.toastr=g;this.projectForm=this.fb.group({name:["",[m.required,m.minLength(3)]],description:["",m.required],technology:["",m.required],url:["",[m.required,m.pattern(/^(https?:\/\/)?([\w.-]+)+(:\d+)?(\/[\w.-]*)*\/?$/)]],imgUrl:["",[m.required,m.pattern(/^(https?:\/\/)?([\w.-]+)+(:\d+)?(\/[\w.-]*)*\/?$/)]]})}project;id=0;errorMessage="";projectForm;token=null;ngOnInit(){try{this.route.paramMap.subscribe(r=>{let e=r.get("id");e&&(this.id=+e,this.getProjectDetail(this.id))})}catch(r){console.error("Error al obtener los proyectos:",r)}}getProjectDetail(r){if(r===null){this.toastr.error("Error al obtener el proyecto","",{timeOut:5e3,positionClass:"toast-top-right"});return}try{this.projectService.getProjectById(r).subscribe(e=>{e&&(this.project=e,this.projectForm.patchValue({name:e.name,description:e.description,technology:e.technology,url:e.url,imgUrl:e.imgUrl}))},e=>{console.error("Error al obtener los detalles del proyecto:",e)})}catch(e){console.error("Error al obtener los proyectos:",e)}}updateProject(){let r=E({id:this.id},this.projectForm.value);try{this.projectService.updateProject(this.id,r).subscribe(e=>{e?(this.toastr.success("Proyecto actualizado con \xE9xito","",{timeOut:5e3,positionClass:"toast-top-right"}),this.router.navigate(["/"])):this.toastr.error("Error al actualizar el proyecto","",{timeOut:5e3,positionClass:"toast-top-right"})},e=>{console.error("Error al actualizar el proyecto:",e),this.toastr.error("Hubo un error inesperado al actualizar el proyecto.")})}catch(e){console.error("Error al actualizar el proyecto:",e)}}static \u0275fac=function(e){return new(e||t)(f(B),f($),f(U),f(D),f(G))};static \u0275cmp=w({type:t,selectors:[["app-editar-project"]],decls:11,vars:5,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","shadow-lg","p-4","rounded",2,"max-width","600px","width","100%"],[1,"d-flex","justify-content-end","position-relative","mb-3"],[1,"btn","btn-danger","btn-lg",2,"font-family","'Roboto', sans-serif","font-size","1rem","padding","5px 15px","border-radius","30px","transition","0.3s","background-color","rgba(222, 46, 184, 0.8)","border","2px solid rgba(192, 57, 43, 0.8)","color","#fff","box-shadow","0 4px 6px rgba(0,0,0,0.1)",3,"href"],[1,"fas","fa-arrow-left"],[1,"text-white"],[1,"text-center","mb-4"],[3,"formGroup"],[1,"mt-3"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","name",1,"fw-bold"],["id","name","formControlName","name","placeholder","Ingresa el nombre del proyecto",1,"form-control"],[1,"text-danger"],["for","descripci\xF3n",1,"fw-bold"],["id","description","formControlName","description","placeholder","Ingresa el nombre del proyecto",1,"form-control"],["for","technology",1,"fw-bold"],["id","technology","formControlName","technology","placeholder","Ingresa el nombre del proyecto",1,"form-control"],["for","url",1,"fw-bold"],["id","url","formControlName","url","placeholder","Ingresa el nombre del proyecto",1,"form-control"],["for","imgUrl",1,"fw-bold"],["id","imgUrl","formControlName","imgUrl","placeholder","Ingresa el nombre del proyecto",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"alert","alert-danger","text-center"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),u(4,"i",4),i(5,"span",5),n(6,"Regresar"),o()()(),i(7,"h2",6),n(8,"Editar Proyecto"),o(),s(9,te,28,7,"form",7)(10,oe,3,1,"div",8),o()()),e&2&&(c(3),b("href",M(3,Q,"/detail/"+(a.project==null?null:a.project.id)),P),c(6),p(a.project?9:-1),c(),p(a.errorMessage?10:-1))},dependencies:[k,A,V,z,L,O,q],encapsulation:2})};var re=[{path:":id",component:C,canActivate:[H]}],x=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=h({imports:[y.forChild(re),y]})};var K=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=h({imports:[T,x]})};export{K as EditModule};
